
.main-panel(class="messages-container #{get_admin_class(@chatd.user)}" id="#{get_window_id(@chatd.channel)}" aria-label="Channel")
  - unless embedded_version() do
    %nav.navbar.navbar-transparent.navbar-absolute
      .container-fluid
        .navbar-minimize
          %button#minimizeSidebar.btn.btn-round.btn-white.btn-fill.btn-just-icon
            %i.material-icons.visible-on-sidebar-regular more_vert
            %i.material-icons.visible-on-sidebar-mini view_list
        .navbar-header
          %button.navbar-toggle(type="button" data-toggle="collapse")
            %span.sr-only "Toggle navigation"
            %span.icon-bar
            %span.icon-bar
            %span.icon-bar
          = render "messages_header.html", chatd: @chatd

  .content
    .container-fluid
      .row
        .col-md-12
          %div(class="container-bars #{container_bars_show(@chatd.channel)}")
            - if unread = get_unread_data(@chatd.channel) do
              - if unread[:since] do
                - if unread[:count] do
                  .unread-bar.color-primary-action-color.background-component-color(style="display: none;")
                    %button.jump-to
                      %span.jump-to-large Jump to first unread
                      %span.jump-to-small Jump
                    %span.unread-count-since
                      = unread[:count_span]
                      = unread[:since]
                    %span.unread-count
                      = unread[:count_span]
                      = unread[:count]
                    %button.mark-read
                      Mark as read
            - for _upload <- get_uploading(@chatd) do
              %div(class="upload-progress color-primary-action-color background-component-color #{has_upload_error(@conn)}")
                - if error = get_upload_error(@chatd) do
                  .upload-progress-text
                    = error
                    %button close
                - else
                  .upload-progress-progress(style="width: #{get_error_percentage(error)}%;")
                  .upload-progress-text
                    = "#{get_error_name(error)}... #{get_error_percentage(error)}%"
                    %button cancel

          %div(class="messages-box #{message_box_selectable()} #{view_mode(@chatd.user)}" style="height: calc(100% - 131px);")
            = render "messages_box.html", chatd: @chatd
        %footer.footer
          = render UccChat.Web.MessageView, "message_box.html", chatd: @chatd, mb: get_mb(@chatd)


